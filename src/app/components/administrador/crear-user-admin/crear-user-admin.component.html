<div class="crear-usuario-container">
  <h2>Crear Usuario</h2>
  <form (ngSubmit)="onSubmit(userForm)" #userForm="ngForm">
    <div>
      <label for="dni">DNI:</label>
      <input type="text" id="dni" [(ngModel)]="user.dni" name="dni" required #dni="ngModel" />
      <div *ngIf="dni.invalid && dni.touched" class="error-message">DNI es requerido</div>
    </div>

    <div>
      <label for="apellido">Apellido:</label>
      <input type="text" id="apellido" [(ngModel)]="user.apellido" name="apellido" required #apellido="ngModel" />
      <div *ngIf="apellido.invalid && apellido.touched" class="error-message">Apellido es requerido</div>
    </div>

    <div>
      <label for="nombre">Nombre:</label>
      <input type="text" id="nombre" [(ngModel)]="user.nombre" name="nombre" required #nombre="ngModel" />
      <div *ngIf="nombre.invalid && nombre.touched" class="error-message">Nombre es requerido</div>
    </div>

    <div>
      <label for="fecha_nacimiento">Fecha de Nacimiento:</label>
      <input type="date" id="fecha_nacimiento" [(ngModel)]="user.fecha_nacimiento" name="fecha_nacimiento" required #fecha_nacimiento="ngModel" />
      <div *ngIf="fecha_nacimiento.invalid && fecha_nacimiento.touched" class="error-message">Fecha de nacimiento es requerida</div>
    </div>

    <div>
      <label for="password">Contraseña:</label>
      <input type="password" id="password" [(ngModel)]="user.password" name="password" required #password="ngModel" />
      <div *ngIf="password.invalid && password.touched" class="error-message">Contraseña es requerida</div>
    </div>

    <!-- Campo de rol -->
    <div>
      <label for="rol">Rol:</label>
      <select id="rol" [(ngModel)]="user.rol" name="rol" required (change)="onRoleChange()">
        <option value="Operador">Operador</option>
        <option value="Medico">Medico</option>
        <option value="Administrador">Administrador</option>
      </select>
      <div *ngIf="userForm.controls['rol']?.invalid && userForm.controls['rol']?.touched" class="error-message">Rol es requerido</div>
    </div>

    <!-- Campo de especialidades para médicos -->
<!-- Campo de especialidades para médicos -->
  <div *ngIf="user.rol === 'Medico'">
    <label for="especialidad">Especialidad:</label>
    <select id="especialidad" [(ngModel)]="user.id_especialidad" name="id_especialidad" required #id_especialidad="ngModel">
      <option style="color: black; background-color: white;" *ngFor="let especialidad of especialidades" [value]="especialidad.id">
        {{ especialidad.descripcion }}
      </option>
    </select>
    <div *ngIf="id_especialidad.invalid && id_especialidad.touched" class="error-message">Especialidad es requerida</div>
  </div>

    <div>
      <label for="email">Correo Electrónico:</label>
      <input type="email" id="email" [(ngModel)]="user.email" name="email" required #email="ngModel" />
      <div *ngIf="email.invalid && email.touched" class="error-message">Correo electrónico es requerido</div>
    </div>

    <div>
      <label for="telefono">Teléfono:</label>
      <input type="tel" id="telefono" [(ngModel)]="user.telefono" name="telefono" required #telefono="ngModel" />
      <div *ngIf="telefono.invalid && telefono.touched" class="error-message">Teléfono es requerido</div>
    </div>

    <div>
      <label for="id_cobertura">Cobertura:</label>
      <select id="id_cobertura" [(ngModel)]="user.id_cobertura" name="id_cobertura" required #id_cobertura="ngModel">
        <option *ngFor="let cobertura of coberturas" [value]="cobertura.id">{{ cobertura.nombre }}</option>
      </select>
      <div *ngIf="id_cobertura.invalid && id_cobertura.touched" class="error-message">Cobertura es requerida</div>
    </div>

    <button type="submit" [disabled]="userForm.invalid">Crear Usuario</button>
  </form>
  <button routerLink="/"> Volver al inicio </button>
</div>